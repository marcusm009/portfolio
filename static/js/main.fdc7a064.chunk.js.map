{"version":3,"sources":["react-components/MenuButton.js","react-components/NavButton.js","react-components/NavBar.js","react-components/TitleBar.js","classes/Camera.js","classes/Controller.js","classes/AudioManager.js","classes/Player.js","classes/RectangularPrismPlayer.js","classes/Tile.js","classes/Floor.js","react-components/Canvas.js","react-components/Footer.js","react-components/Page.js","react-components/CanvasSwitcher.js","react-components/pages/Welcome.js","react-components/FadeInSection.js","react-components/CustomizedTimeline.js","react-components/Overview.js","react-components/pages/About.js","react-components/pages/Projects.js","react-components/pages/Contact.js","App.js","reportWebVitals.js","index.js"],"names":["MenuButton","isOpen","setOpen","id","onClick","style","width","height","NavButton","button","location","useLocation","pathname","to","route","className","text","calcOrientation","pixelRatio","NavBar","buttons","ref","useRef","useState","window","innerWidth","innerHeight","devicePixelRatio","orientation","setOrientation","handleClickOutside","event","current","contains","target","useEffect","console","log","document","addEventListener","removeEventListener","map","idx","TitleBar","baseRoute","showWelcomePage","history","useHistory","Logo","Icon","alt","src","maxWidth","IconButton","push","type","reload","Camera","position","focalPoint","aspect","frustumSize","spawnPos","clone","set","lookAt","near","far","update","this","left","right","top","bottom","updateProjectionMatrix","player","maxSpeed","Number","MAX_SAFE_INTEGER","xDiff","x","zDiff","z","completionPending","completedLevel","origYDiff","y","newYDiff","deltaY","Math","max","min","THREE","Controller","isEnabled","solutionPath","undefined","moveCallback","dir","handleKeyDown","bind","handleTouchStart","handleTouchMove","xDown","yDown","solutionLoaded","autoSolveTimer","loadSolution","handleScroll","lastMoveWasManual","hasMoved","a","fetch","then","res","solution","solutionIdx","keyCode","which","touches","originalEvent","firstTouch","getTouches","clientX","clientY","xUp","yUp","yDiff","angle","atan2","PI","clearTimeout","stepTimeInSeconds","length","setTimeout","autoSolve","AudioManager","audioiOS","context","loadedSound","listener","loader","sounds","sound","volume","volMin","volMax","randIdx","floor","random","randVol","isiOS","_playSoundiOS","_playSound","loadContext","s","isPlaying","stop","setVolume","play","source","controller","pause","load","AudioContext","webkitAudioContext","resume","numSounds","i","buffer","setBuffer","setLoop","Player","scale","color","cubeGeometry","cubeMaterial","blending","name","size","spawnScale","fallVelocity","isReadyToMove","isFalling","lastDirection","lastRotation","respawnPending","animations","framesLeftOfAnimation","move","direction","framesPerRoll","rotVel","didMove","rotateOnWorldAxis","respawn","playSound","removeCompletedAnimations","complete","getNextAction","checkFloor","newAnimations","roundPosition","roundQuaternion","pos","getGridPosition","hasBlockInLocation","hasGoalInLocation","fall","beginCompletion","completeLevel","gravity","frames","round","w","quaternion","_x","_y","_z","_w","roundQuaternionComponent","q","setRotationFromQuaternion","copy","rotation","abs","sqrt","RectangularPrismPlayer","getOrientation","deltaGrid","toInt","quickRotate","axis","invertPos","posFrames","rotFrames","num","Tile","opacity","transparent","cycleColor","material","getRandomColor","Floor","colors","colorProb","tiles","goalTile","templatePath","template","split","row","addTiles","toLowerCase","spawnTile","scene","tile","add","xInt","zInt","includes","getBlockInLocation","positions","Hints","matchMedia","matches","Canvas","props","state","initThreeCanvas","resizeCanvasToMountSize","isInitialized","shouldResumeCanvas","resumeThreeCanvas","isActive","isComplete","level","camera","reset","setState","navigator","platform","initialMountWidth","mount","offsetWidth","initialMountHeight","offsetHeight","renderer","alpha","antialias","setPixelRatio","setSize","appendChild","domElement","zIndex","dirLight","audioManager","loadSound","loadTemplate","addToScene","setController","follow","logLocation","frame","shouldRender","animate","render","isMuted","completeStageCallback","isRunning","requestAnimationFrame","canvas","canvasWidth","canvasHeight","mountWidth","mountHeight","firstElementChild","updateCanvasCSS","controls","aria-label","alert","transform","display","margin","textAlign","Button","variant","Component","Footer","Page","replayStageCallback","nextLevel","isFadingIn","setFadingIn","useStyles","makeStyles","root","backgroundColor","padding","paddingBottom","transition","fade","active","classes","Container","minHeight","startIcon","Grid","container","justify","endIcon","CanvasSwitcher","pages","forEach","element","html","getElementsByTagName","completed","touchAction","page","component","replace","messages","Message","msg","Typography","Welcome","dismissWelcomePage","Array","fill","curMessages","setMessages","directionsVis","setDirectionsVis","imgVis","setImgVis","tapClickVis","setTapClickVis","didUpdate","newMessages","substring","updateText","onclick","FadeInSection","isVisible","domRef","children","theme","card","media","CustomizedTimeline","shouldAlternate","useMediaQuery","content","year","icon","image","title","link","subtitle","Timeline","flexGrow","align","info","TimelineItem","TimelineOppositeContent","TimelineSeparator","TimelineDot","TimelineConnector","TimelineContent","Card","CardMedia","backgroundSize","CardContent","gutterBottom","fontStyle","Overview","shouldWrap","flexDirection","Avatar","objectFit","paper","About","cards","interests","Paper","interest","j","Box","Projects","href","fontSize","textDecoration","Contact","email","message","form","setForm","error","setError","emailSent","setEmailSent","handleChange","field","value","newForm","TextField","label","placeholder","onChange","helperText","fullWidth","required","multiline","rows","rowMax","preventDefault","httpRequest","encodeURI","method","mode","headers","BASE_ROUTE","VERSION","test","App","welcomePageDismissed","touchEnabled","basename","CssBaseline","newState","Object","assign","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fdc7a064.chunk.js","sourcesContent":["import { MdClose } from 'react-icons/md'\nimport { FiMenu } from 'react-icons/fi'\n\nconst MenuButton = ({ isOpen, setOpen }) => {\n  \n  return (\n    <button\n      id='menu-opener'\n      onClick={() => setOpen(!isOpen)}>\n      {isOpen ? (\n        <MdClose style={{width: '40px', height: '40px'}}/>\n      ) : (\n        <FiMenu style={{width: '40px', height: '40px'}}/>\n      )}\n      \n    </button>\n  )\n}\n\nexport default MenuButton\n","import { Link } from 'react-router-dom'\nimport { useLocation } from 'react-router-dom'\n\nconst NavButton = ({ button }) => {\n  const location = useLocation().pathname\n  \n  return (\n    <Link\n      to={button.route}\n      className={(location === button.route) ? 'selected' : ''}\n    >\n      {button.text}\n    </Link>\n  )\n}\n\nexport default NavButton\n","import { useState, useEffect, useRef } from 'react'\nimport MenuButton from './MenuButton'\nimport NavButton from './NavButton'\n\nconst calcOrientation = (width, height, pixelRatio) => {\n  return (width/height >= 1 && width/pixelRatio > 600) ? 'landscape' : 'portrait'\n}\n\nconst NavBar = ({ buttons }) => {\n  const ref = useRef()\n  const [isOpen, setOpen] = useState(false)\n  const [orientation, setOrientation] = useState(\n    calcOrientation(window.innerWidth, window.innerHeight, window.devicePixelRatio || 1))\n\n  const handleClickOutside = (event) => {\n    if (ref.current && !ref.current.contains(event.target)) {\n      setOpen(false)\n    }\n  }\n\n  useEffect(() => {\n    console.log('px: ', window.devicePixelRatio || 1)\n    document.addEventListener('mousedown', handleClickOutside)\n    document.addEventListener('touchstart', handleClickOutside)\n\n    window.addEventListener('resize', () => {\n      setOrientation(calcOrientation(window.innerWidth, window.innerHeight, window.devicePixelRatio || 1))\n    })\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n      document.removeEventListener('touchstart', handleClickOutside)\n      \n      window.removeEventListener('resize', () => {\n        setOrientation(calcOrientation(window.innerWidth, window.innerHeight, window.devicePixelRatio || 1))\n      })\n    }\n  }, [])\n  \n  return (\n    <div\n      id='nav-bar'\n      ref={ref}\n      className={`top-bar ${orientation} ${(isOpen) ? 'open' : 'closed'}`}>\n          {(orientation === 'portrait') && (\n            <MenuButton isOpen={isOpen} setOpen={setOpen}/>)}\n          {buttons.map((button, idx) => (\n            <NavButton\n              key={idx}\n              button={button}\n            />\n          ))}\n    </div>\n  )\n}\n\nexport default NavBar\n","import { IconButton } from '@material-ui/core'\nimport Icon from '@material-ui/core/Icon'\nimport { useHistory } from 'react-router'\n\nconst TitleBar = ({ baseRoute, showWelcomePage }) => {\n  const history = useHistory()\n  \n  const refresh = () => {\n    window.location.reload()\n  }\n\n  const logoClicked = () => {\n    showWelcomePage()\n    history.push('/')\n  }\n\n  const Logo = () => (\n    <Icon>\n      <img\n        alt='Logo'\n        src={baseRoute + '/images/favicon/favicon-64x64.png'}\n        style={{\n          width: '48px',\n          maxWidth: '100%',\n          height: 'auto'\n        }}/>\n    </Icon>\n  )\n\n  return (\n    <div\n      id={'title-bar'}\n      className={'top-bar'}>\n      <IconButton\n        onClick={() => logoClicked()}>\n        <Logo />\n      </IconButton>\n      <button\n        type='button'\n        className={'title'}\n        onClick={refresh}\n      >\n      {'Marcus Mills'}\n      </button>\n    </div>\n\n  )\n}\n\nexport default TitleBar\n","import * as THREE from 'three'\n\nclass Camera extends THREE.OrthographicCamera {\n    constructor(position, focalPoint, aspect, frustumSize=10) {\n        super()\n        \n        this.spawnPos = position.clone()\n        this.focalPoint = focalPoint.clone()\n        this.aspect = aspect\n        this.frustumSize = frustumSize\n        \n        this.position.set(-1,1,1)\n        this.lookAt(this.focalPoint)\n\n        this.near = -300\n        this.far = 1500\n\n        this.update()\n    }\n\n    update() {\n      this.left = this.frustumSize * this.aspect / - 2\n      this.right = this.frustumSize * this.aspect / 2\n      this.top = this.frustumSize / 2\n      this.bottom = this.frustumSize / - 2\n      \n      this.updateProjectionMatrix()\n    }\n\n    follow(player, maxSpeed=Number.MAX_SAFE_INTEGER) {\n        let xDiff = player.position.x - this.position.x\n        let zDiff = player.position.z - this.position.z\n\n        if (player.completionPending || player.completedLevel) {\n            let origYDiff = player.spawnPos.y - this.spawnPos.y\n            let newYDiff = player.position.y - this.position.y\n\n            let deltaY = newYDiff - origYDiff\n\n            if (deltaY < 0)\n              this.position.y += Math.max(deltaY, -999999); \n            else\n              this.position.y += Math.min(deltaY, 999999)\n        }\n\n\n        if (xDiff < 0)\n            this.position.x += Math.max(xDiff, -maxSpeed)  \n        else\n            this.position.x += Math.min(xDiff, maxSpeed)\n\n        if (zDiff < 0)\n            this.position.z += Math.max(zDiff, -maxSpeed)\n        else\n            this.position.z += Math.min(zDiff, maxSpeed)\n    }\n\n    reset() {\n      this.position.set(-1,1,1)\n    }\n}\n\nexport default Camera","class Controller {\n    constructor(document, isEnabled, solutionPath=undefined) {\n\n        this.moveCallback = (dir) => {console.log('Move callback never assigned');}\n        \n        // keyboard event listeners\n        document.addEventListener('keydown', this.handleKeyDown.bind(this), false)\n\n        // touch event listeners\n        document.addEventListener('touchstart', this.handleTouchStart.bind(this), false)        \n        document.addEventListener('touchmove', this.handleTouchMove.bind(this), false)\n\n        // touch control variables\n        this.xDown = null                                                     \n        this.yDown = null\n\n        // auto-solver\n        this.solutionLoaded = false\n        this.autoSolveTimer = null\n\n        if(solutionPath) {\n          this.loadSolution(solutionPath)\n          document.addEventListener('wheel', this.handleScroll.bind(this), false);\n        }\n\n        this.lastMoveWasManual = false\n        this.hasMoved = false\n        this.isEnabled = isEnabled\n    }\n\n    async loadSolution(solutionPath) {\n        await fetch(solutionPath)\n        .then(res => res.text())\n        .then((solution) => {\n            this.solution = solution\n            this.solutionIdx = 0\n            this.solutionLoaded = true\n        });\n    }\n\n    handleScroll(event) {\n        if(!this.solutionLoaded || !this.isEnabled)\n            return\n\n        if(event.deltaY === -100) {\n            // scroll up: unconditionally respawn\n            if(this.moveCallback('resp'))\n                this.solutionIdx = 0\n        } else if(event.deltaY === 100) {\n            // scroll down:\n            // if last move was manual, respawn; otherwise, move towards objective\n            if(this.lastMoveWasManual) {\n                if(this.moveCallback('resp'))\n                    this.solutionIdx = 0\n            } else if(this.moveCallback(this.solution[this.solutionIdx]))\n                this.solutionIdx++\n        }\n        this.lastMoveWasManual = false\n    }\n\n    handleKeyDown(event) {\n        if (!this.isEnabled)\n            return\n        \n        let keyCode = event.which;\n        if (keyCode === 87 || keyCode === 38) {\n            this.moveCallback('u')\n        } else if (keyCode === 83 || keyCode === 40) {\n            this.moveCallback('d')\n        } else if (keyCode === 65 || keyCode === 37) {\n            this.moveCallback('l')\n        } else if (keyCode === 68 || keyCode === 39) {\n            this.moveCallback('r')\n        } else {\n            console.log('Key pressed: ' + keyCode);\n        }\n        \n        this.hasMoved = true\n        this.lastMoveWasManual = true\n    }\n\n    getTouches(event) {\n        return event.touches || event.originalEvent.touches;\n    }\n\n    handleTouchStart(event) {\n        const firstTouch = this.getTouches(event)[0];                                      \n        this.xDown = firstTouch.clientX;                                      \n        this.yDown = firstTouch.clientY;                                      \n    }\n\n    handleTouchMove(event) {\n        if (!this.isEnabled || !this.xDown || !this.yDown)\n            return\n\n        let xUp = event.touches[0].clientX;                                    \n        let yUp = event.touches[0].clientY;\n\n        let xDiff = this.xDown - xUp;\n        let yDiff = this.yDown - yUp;\n        \n        if (xDiff !== 0 && yDiff !== 0) {\n            let angle = Math.atan2(yDiff,xDiff);\n            if (0 <= angle && angle < Math.PI/2) {\n                this.moveCallback('l');\n            } else if (Math.PI/2 <= angle && angle <= Math.PI) {\n                this.moveCallback('u');\n            } else if (-Math.PI <= angle && angle < -Math.PI/2) {\n                this.moveCallback('r');\n            } else if (-Math.PI/2 <= angle && angle < 0) {\n                this.moveCallback('d');\n            } else {\n                console.log(`This should not happen - touch input angle: ${angle}`);\n            }\n        }\n\n        this.xDown = null\n        this.yDown = null\n\n        clearTimeout(this.autoSolveTimer)\n        this.hasMoved = true\n        this.lastMoveWasManual = true\n    }\n\n    autoSolve(stepTimeInSeconds) {      \n        if(!this.solutionLoaded || !this.isEnabled)\n            return\n\n        if(this.solutionIdx < this.solution.length) {\n            this.handleScroll({deltaY: 100})\n            this.autoSolveTimer = setTimeout(() => {\n                this.autoSolve(stepTimeInSeconds)\n            }, stepTimeInSeconds * 1000)\n        }\n        this.hasMoved = true\n    }\n\n    reset() {\n      this.solutionIdx = 0\n    }\n}\n\nexport default Controller","import * as THREE from 'three'\n\nclass AudioManager {\n    constructor(window, baseRoute, audioiOS, context=null) {\n        this.window = window\n        this.loadedSound = null\n        this.baseRoute = baseRoute\n        this.audioiOS = audioiOS\n\n        this.context = context\n        this.listener = new THREE.AudioListener()\n        this.loader = new THREE.AudioLoader()\n        this.sounds = {}\n    }\n\n    playSound(sound, idx='rand', volume='rand', volMin=.2, volMax=.4) {\n        const randIdx = (max) => Math.floor(Math.random() * max)\n        const randVol = (min, max) => Math.random() * (max - min) + min\n\n        if(idx === 'rand')\n            idx = randIdx(this.sounds[sound].length)\n\n        if(volume === 'rand')\n            volume = randVol(volMin, volMax)\n\n        if(this.audioiOS.isiOS)\n          this._playSoundiOS(sound, idx, volume)\n        else\n          this._playSound(sound, idx, volume)\n    }\n\n    _playSound(sound, idx, volume) {\n      if(!(sound in this.sounds)) {\n          console.log(`Sound: ${sound} -- not loaded!`)\n          return\n      }\n      if(this.context === null) {\n          console.log('context loaded')\n          this.loadContext()\n      }\n      for(let s of this.sounds[sound]) {\n          if(s.isPlaying) {\n              s.stop()\n          }\n      }\n\n      this.sounds[sound][idx].setVolume(volume)\n      this.sounds[sound][idx].play()\n      console.log('playing sound')\n  }\n\n    _playSoundiOS(sound, idx, volume) {\n      // this.audioiOS.source.src = 'http://mmills.io/portfolio/sounds/block-move-ios/0.wav'\n      this.audioiOS.source.src = `http://mmills.io/portfolio/sounds/${sound}-ios/${idx}.wav`\n      this.audioiOS.controller.pause()\n      this.audioiOS.controller.load()\n      this.audioiOS.controller.play()\n      // .then(() => this.audioiOS.controller.pause())\n      console.log('playing ios sound')\n    }\n\n    loadContext() {\n        let AudioContext = window.AudioContext || window.webkitAudioContext\n        this.context = new AudioContext()\n        this.context.resume().then(() => {\n            console.log('Playback resumed successfully')\n        })\n    }\n\n    loadSound(sound, numSounds) {\n        this.sounds[sound] = []\n        for(let i = 0; i < numSounds; i++) {\n            this.sounds[sound].push(new THREE.Audio(this.listener))\n            this.loader.load(`${this.baseRoute}/sounds/${sound}/${i}.ogg`, (buffer) => {\n                this.sounds[sound][i].setBuffer(buffer)\n                this.sounds[sound][i].setLoop(false)\n                this.sounds[sound][i].setVolume(1)\n            })\n        }  \n      \n    }\n}\n\nexport default AudioManager","import * as THREE from 'three'\n\nclass Player extends THREE.Mesh {\n  constructor(x, z, y = 1, scale = [.9, .9, .9], color = 'red') {\n    let cubeGeometry = new THREE.BoxGeometry(scale[0], scale[1], scale[2])\n    let cubeMaterial = new THREE.MeshPhongMaterial()\n    // let cubeMaterial = new THREE.MeshPhongMaterial({map: texture})\n    cubeMaterial.color = new THREE.Color(color)\n    cubeMaterial.blending = THREE.NoBlending\n    super(cubeGeometry, cubeMaterial)\n    \n    // let materials = []\n    // for(let i = 0; i < 6; i++) {\n    //   materials.push(\n    //     new THREE.MeshBasicMaterial({\n    //       map: new THREE.TextureLoader().load(`textures/player/${(i === 2 || i === 3) ? '1' : '2'}.png`),\n    //       side: THREE.DoubleSide\n    //     })\n    //   )\n    // }\n\n    // let cubeMaterial = new THREE.MeshFaceMaterial(materials)\n    // super(cubeGeometry, materials)\n\n    this.name = 'player'\n    this.position.x = x\n    this.position.y = y\n    this.position.z = z\n\n    this.size = scale\n\n    this.spawnPos = this.position.clone()\n    this.spawnScale = this.scale.clone()\n\n    this.fallVelocity = 0\n\n    this.isReadyToMove = true\n    this.isFalling = false\n    this.completedLevel = false\n\n    this.lastDirection = 'resp'\n    this.lastRotation = new THREE.Vector3(0,0,0)\n\n    this.respawnPending = false\n    this.completionPending = false\n\n    this.animations = []\n    this.framesLeftOfAnimation = 0;\n  };\n\n  setController(controller) {\n    this.controller = controller;\n    this.controller.moveCallback = (dir) => {\n      return this.move(dir);\n    };\n  };\n\n  move(direction, framesPerRoll = 10) {\n    let rotVel = (Math.PI / 2) / framesPerRoll\n    let didMove = false\n\n    if (this.isReadyToMove === true) {\n      if (direction === 'u') {\n        this.animations.push([() => {\n          this.position.x += 1 / framesPerRoll\n          this.rotateOnWorldAxis(new THREE.Vector3(0,0,1),-rotVel)\n        }, framesPerRoll])\n      } else if (direction === 'd') {\n        this.animations.push([() => {\n          this.position.x -= 1 / framesPerRoll\n          this.rotateOnWorldAxis(new THREE.Vector3(0,0,1), rotVel)\n        }, framesPerRoll])\n      } else if (direction === 'l') {\n        this.animations.push([() => {\n          this.position.z -= 1 / framesPerRoll\n          this.rotateOnWorldAxis(new THREE.Vector3(1,0,0), -rotVel)\n        }, framesPerRoll])\n      } else if (direction === 'r') {\n        this.animations.push([() => {\n          this.position.z += 1 / framesPerRoll\n          this.rotateOnWorldAxis(new THREE.Vector3(1,0,0), rotVel)\n        }, framesPerRoll])\n      } else if (direction === 'resp') {\n        this.respawn()\n      }\n\n      didMove = true\n      this.playSound = true\n      this.isReadyToMove = false\n      this.lastDirection = direction\n    }\n\n    return didMove\n  }\n\n  animate(floor) {\n    /* Animations structure:\n       [\n         [\n           fn: animation,\n           int: tot_animation_frames,\n           int (optional): delay_in_frames_before_starting\n          ],\n         [...],\n         ...animations\n       ]\n    */\n\n    for (let i = 0; i < this.animations.length; i++) {\n      if (this.animations[i][1] > 0) {\n        if (this.animations[i].length < 3 || this.animations[i][2] <= 0)\n          this.animations[i][0].bind(this)()\n        this.animations[i][1]--  // Decrement frames\n        if (this.animations[i].length >= 3) {\n          this.animations[i][2]--  // Decrement delay (if specified)\n        }\n      }\n    }\n    this.removeCompletedAnimations();\n\n    if (this.animations.length === 0) {\n      if (this.completionPending) {\n        this.complete()\n      } else {\n        this.getNextAction()\n        this.checkFloor(floor)\n      }\n    }\n    this.playSound = false;\n  };\n\n  removeCompletedAnimations() {\n    let newAnimations = [];\n    for (let i = 0; i < this.animations.length; i++) {\n      if (this.animations[i][1] > 0)\n        newAnimations.push(this.animations[i])\n    }\n    this.animations = newAnimations\n  };\n\n  getNextAction() {\n    if (this.respawnPending) {\n      this.respawnPending = false\n      this.respawn()\n    } else {\n      this.roundPosition()\n      this.roundQuaternion()\n      this.isReadyToMove = true\n    }\n  }\n\n  checkFloor(floor) {\n    let pos = this.getGridPosition()\n    // fall\n    if (!floor.hasBlockInLocation(pos)) {\n      this.fall(0.02)\n      this.respawnPending = true\n    }\n    // complete level\n    else if (floor.hasGoalInLocation(pos)) {\n      this.fall(0.005, 100)\n      this.beginCompletion()\n      floor.completeLevel()\n    }\n  }\n\n  fall(gravity, frames = 50) {\n    this.isFalling = true\n    this.isReadyToMove = false\n\n    this.animations.push([() => {\n      this.position.y -= this.fallVelocity\n      this.fallVelocity += gravity\n    }, frames])\n  }\n\n  getGridPosition() {\n    return [this.position.x, this.position.z]\n  }\n\n  roundPosition() {\n    this.position.round()\n  }\n\n  roundQuaternion() {\n    let x, y, z, w\n    if(this.quaternion._x !== undefined && \n       this.quaternion._y !== undefined &&\n       this.quaternion._z !== undefined && \n       this.quaternion._w !== undefined) {\n      x = roundQuaternionComponent(this.quaternion._x)\n      y = roundQuaternionComponent(this.quaternion._y)\n      z = roundQuaternionComponent(this.quaternion._z)\n      w = roundQuaternionComponent(this.quaternion._w)\n      let q = new THREE.Quaternion(x,y,z,w)\n      this.setRotationFromQuaternion(q)\n    }\n  }\n\n  respawn() {\n    this.fallVelocity = 0\n    this.animations = []\n    this.position.copy(this.spawnPos)\n    this.scale.copy(this.spawnScale)\n    this.setRotationFromQuaternion(new THREE.Quaternion(0,0,0,1))\n  }\n\n  beginCompletion() {\n    this.completionPending = true\n\n    // Add completion animations\n    let framesPerAnimation = 25\n    let rotVel = (Math.PI / 4) / framesPerAnimation\n    let delay = framesPerAnimation\n\n    this.animations.push([() => {\n      this.rotation.y -= rotVel\n    }, framesPerAnimation])\n    this.animations.push([() => {\n      this.scale.x *= 1.1\n      this.scale.y *= 1.1\n      this.scale.z *= 1.1\n    }, 3 * framesPerAnimation, delay])\n  }\n\n  complete() {\n    this.position.x = 9999999\n    this.position.y = 9999999\n    this.position.z = 9999999\n    this.completionPending = false\n    this.completedLevel = true\n    console.log('completion called')\n  }\n}\n\nconst roundQuaternionComponent = (q) => {\n  // round to 0\n  if(Math.abs(q) < 1e-10)\n    return 0\n  // round to (+/-) .5\n  if(Math.abs(q) - .5 < 1e-10) {\n    if(q < 0)\n      return -.5\n    else\n      return .5\n  }\n  // round to (+/-) sqrt(2) / 2\n  if(Math.abs(q) - (Math.sqrt(2) / 2) < 1e-10) {\n    if(q < 0)\n      return -Math.sqrt(2) / 2\n    else\n      return Math.sqrt(2) / 2\n  }\n  // round to (+/-) 1\n  if(Math.abs(q) - 1 < 1e-10) {\n    if(q < 0)\n      return -1\n    else\n      return 1\n  }\n}\n\nexport default Player","import * as THREE from 'three'\nimport Player from './Player'\n\nclass RectangularPrismPlayer extends Player {\n  constructor(x, z, y = 1, scale = [.9, 1.8, .9], color = 'red') {\n    super(x, z, y + .25 * scale[1], scale, color)\n  }\n\n  move(direction, framesPerRoll = 10) {\n    let rotVel = (Math.PI / 2) / framesPerRoll\n    let didMove = false\n\n    if (this.isReadyToMove === true) {\n      \n      let orientation = this.getOrientation()\n      let deltaGrid = 1 / framesPerRoll\n      let deltaY = 0\n      \n      let rotation\n\n      if((orientation === 'UPRIGHT') ||\n         (orientation === 'UP-DOWN' && (direction === 'u' || direction === 'd')) ||\n         (orientation === 'LEFT-RIGHT' && (direction === 'l' || direction === 'r'))) {\n          \n        deltaGrid *= 1.5\n        deltaY = (orientation === 'UPRIGHT' ? -1 : 1) * .25 * this.size[1] / framesPerRoll\n      }\n\n      if(direction === 'u') {\n        rotation = new THREE.Vector3(0,0,-1)\n        this.animations.push([() => {\n          this.position.x += deltaGrid\n          this.position.y += deltaY\n          this.rotateOnWorldAxis(rotation, rotVel)\n          }, framesPerRoll])\n      } else if(direction === 'd') {\n        rotation = new THREE.Vector3(0,0,1)\n        this.animations.push([() => {\n          this.position.x -= deltaGrid\n          this.position.y += deltaY\n          this.rotateOnWorldAxis(rotation, rotVel)\n          }, framesPerRoll])\n      } else if(direction === 'r') {\n        rotation = new THREE.Vector3(1,0,0)\n        this.animations.push([() => {\n          this.position.z += deltaGrid\n          this.position.y += deltaY\n          this.rotateOnWorldAxis(rotation, rotVel)\n          }, framesPerRoll])\n      } else if(direction === 'l') {\n        rotation = new THREE.Vector3(-1,0,0)\n        this.animations.push([() => {\n            this.position.z -= deltaGrid\n            this.position.y += deltaY\n            this.rotateOnWorldAxis(rotation, rotVel)\n            }, framesPerRoll])\n      } else if (direction === 'resp') {\n        this.respawn()\n      }\n\n      didMove = true\n      this.playSound = true\n      this.isReadyToMove = false\n      this.lastDirection = direction\n      this.lastRotation = rotation\n    }\n\n    return didMove\n  }\n\n  getOrientation() {\n    let x = this.position.x\n    let z = this.position.z\n\n    if(x === toInt(x) && z === toInt(z))\n      return 'UPRIGHT'\n    if(x === toInt(x))\n      return 'LEFT-RIGHT'\n    if(z === toInt(z))\n      return 'UP-DOWN'\n  }\n\n  checkFloor(floor) {\n    let pos = this.getGridPosition()\n    let orientation = this.getOrientation()\n\n    // regular checkFloor handling\n    if(orientation === 'UPRIGHT') {\n      return super.checkFloor(floor)\n    }\n    \n    // any fall\n    if (!floor.hasBlockInLocation(pos[0]) || !floor.hasBlockInLocation(pos[1])) {\n      // both blocks off the grid\n      if (!floor.hasBlockInLocation(pos[0]) && !floor.hasBlockInLocation(pos[1])) {\n        // this.quickRotate(this.lastRotation)\n      }\n      // first block off grid\n      else if (!floor.hasBlockInLocation(pos[0])) {\n        console.log('first off')\n        if(orientation === 'UP-DOWN')\n          this.quickRotate(new THREE.Vector3(0,0,1))\n        else\n          this.quickRotate(new THREE.Vector3(-1,0,0), false)\n      }\n      // second block off grid\n      else {\n        console.log('second off')\n        if(orientation === 'UP-DOWN')\n          this.quickRotate(new THREE.Vector3(0,0,-1))\n        else\n          this.quickRotate(new THREE.Vector3(1,0,0), false)\n      }\n      \n      this.fall(0.02)\n      this.respawnPending = true\n    }\n  }\n\n  quickRotate(axis, invertPos=true, posFrames=10, rotFrames=25) {\n    // push position change\n    let x = (invertPos ? -1 : 1) * axis.z\n    let z = (invertPos ? -1 : 1) * axis.x\n    this.animations.push([() => {\n      this.position.x += .5*x / posFrames\n      this.position.z += .5*z / posFrames\n    }, posFrames])\n\n    // push rot change\n    let rotVel = (Math.PI / 2) / rotFrames\n    this.animations.push([() => {\n      this.rotateOnWorldAxis(axis, rotVel)\n    }, rotFrames])\n  }\n\n  getGridPosition() {\n    let x = this.position.x\n    let z = this.position.z\n    let orientation = this.getOrientation()\n\n    if(orientation === 'UPRIGHT')\n      return [x,z]\n    if(orientation === 'UP-DOWN')\n      return [[x-.5,z],[x+.5,z]]\n    if(orientation === 'LEFT-RIGHT')\n      return [[x,z-.5],[x,z+.5]]\n  }\n\n  // Rounds the position to the nearest .5\n  roundPosition() {\n    this.position.x = Math.round(this.position.x*2)/2\n    this.position.z = Math.round(this.position.z*2)/2\n  }\n}\n\nconst toInt = (num) => ~~num\n\nexport default RectangularPrismPlayer","import * as THREE from 'three'\n\nclass Tile extends THREE.Mesh {\n    constructor(x, z, y=0, scale=.9, color=0xffffff, opacity=1) {\n        let cubeGeometry = new THREE.BoxGeometry(scale, .5*scale, scale)\n        let cubeMaterial = new THREE.MeshPhongMaterial()\n        if(color === 'cycle') {\n          cubeMaterial.color = new THREE.Color(0)\n        } else {\n          cubeMaterial.color = new THREE.Color(color)\n        }\n        cubeMaterial.blending = THREE.NoBlending\n        cubeMaterial.transparent = true\n        cubeMaterial.opacity = opacity\n\n        super(cubeGeometry, cubeMaterial)\n        this.position.x = x\n        this.position.y = y+.325*scale\n        this.position.z = z\n\n        if(color === 'cycle') {\n            this.cycleColor()\n        }\n    }\n\n    getPosition() {\n        return [this.position.x, this.position.z]\n    }\n\n    cycleColor() {\n      const getRandomColor = () => {\n          let letters = '0123456789ABCDEF'\n          let color = '#'\n          for (let i = 0; i < 6; i++) {\n              color += letters[Math.floor(Math.random() * 16)]\n          }\n          return color\n      }\n      \n      this.material.color = new THREE.Color(getRandomColor())\n      setTimeout(() => this.cycleColor(), 250)\n    }\n\n}\n\nexport default Tile","import Tile from './Tile'\n\nclass Floor {\n    constructor(scale, colors=[0xffffff], colorProb=[1]) {\n        this.tiles = []\n        this.goalTile = undefined\n\n        this.scale = scale\n\n        this.colors = colors\n        this.colorProb = colorProb\n\n    }\n\n    async loadTemplate(templatePath) {\n        await fetch(templatePath)\n        .then(res => res.text())\n        .then((template) => {\n            this.template = template.split('\\n').map(row => row.split('\\t'))\n            this.addTiles()\n        });\n    };\n\n    setTemplate(template) {\n      this.template = template\n      this.addTiles()\n    }\n\n    addTiles() {\n        for (let z = 0; z < this.template.length; z++) {\n            for (let x = 0; x < this.template[z].length; x++) {\n                if (this.template[z][x].toLowerCase() === 'x') {\n                    this.tiles.push(new Tile(x, z))\n                }\n                else if (this.template[z][x].toLowerCase() === 's') {\n                    if (this.spawnTile !== undefined) {\n                        console.log('ERROR: Multiple spawn tiles! Please fix level template')\n                    }\n                    this.spawnTile = new Tile(x, z, 0, .9, 0xd4d4d4)\n                    this.tiles.push(this.spawnTile)\n                }\n                else if (this.template[z][x].toLowerCase() === 'g') {\n                    if (this.goalTile !== undefined) {\n                        console.log('ERROR: Multiple goal tiles! Please fix level template')\n                    }\n                    this.goalTile = new Tile(x, z, 0, .9, 'cycle', .25)\n                    this.tiles.push(this.goalTile)\n                }\n            }\n        }\n    }\n\n    addToScene(scene) {\n        for (let tile of this.tiles) {\n            scene.add(tile)\n        }\n    }\n\n    getBlockInLocation(pos) {\n        let xInt = Math.round(pos[0])\n        let zInt = Math.round(pos[1])\n        if (xInt < 0 || zInt < 0 || xInt >= this.template[0].length || zInt >= this.template.length) {\n            return ''\n        }\n        return this.template[zInt][xInt].toLowerCase()\n    }\n\n    hasBlockInLocation(pos) {\n        return ['x','s','g'].includes(this.getBlockInLocation(pos))\n    }\n\n    hasGoalInLocation(pos) {\n        return this.getBlockInLocation(pos) === 'g'\n    }\n\n    getPositions() {\n        let positions  = [];\n        for (let tile of this.tiles) {\n            positions.push(tile.position)\n        }\n        return positions\n    }\n\n    completeLevel() {\n        return  \n      // this.goalTile.position.z = 100000\n    }\n\n    // reset() {\n\n    // }\n}\n\nexport default Floor","import { Component } from 'react'\n\nimport * as THREE from 'three'\n\nimport Camera from '../classes/Camera'\nimport Controller from '../classes/Controller'\nimport AudioManager from '../classes/AudioManager'\nimport RectangularPrismPlayer from '../classes/RectangularPrismPlayer'\nimport Floor from '../classes/Floor'\n\nimport { Button, IconButton } from '@material-ui/core'\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff'\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp'\n\nclass Canvas extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      'renderer': null,\n      'scene': null,\n      'camera': null,\n      'audioManager': null,\n      'floor': null,\n      'controller': null,\n      'player': null,\n      'initialMountWidth': null,\n      'initialMountHeight': null,\n      'isInitialized': false,\n      'audioiOS': {\n        'isiOS': this.props.isiOS,\n        'controller': null,\n        'source': null\n      },\n      'isMuted': this.props.isiOS,\n      'shouldResumeCanvas': true,\n      'hasMoved': false\n    }\n  }\n\n  async componentDidMount() {\n    console.log('Canvas mounted')\n    this.initThreeCanvas()\n    window.addEventListener('resize', this.resizeCanvasToMountSize.bind(this))\n  }\n\n  async componentDidUpdate() {\n    console.log('Canvas updated')\n    if(this.state.isInitialized) {\n      if(this.state.shouldResumeCanvas)\n        this.resumeThreeCanvas()\n      else\n        this.state.shouldResumeCanvas = true\n      \n      this.resizeCanvasToMountSize()\n      this.state.controller.isEnabled = this.props.isActive\n      // If props are set to complete and player state complete, player completed level\n      if(this.props.isComplete && this.state.player.completedLevel) {\n        console.log('completed - ', this.props.level)\n      }\n      // If props are not set to complete but player state is, this implies that the level\n      // needs to be restarted\n      if(!this.props.isComplete && this.state.player.completedLevel) {\n        this.state.player.completedLevel = false\n        this.state.player.respawn()\n        this.state.camera.reset()\n        this.state.controller.reset()\n        this.setState(this.state)\n        console.log(this.state)\n      }\n    }\n  }\n\n  async componentWillUnmount() {\n    window.removeEventListener('resize', this.resizeCanvasToMountSize.bind(this))\n    console.log('Canvas unmounted')\n  }\n\n  async initThreeCanvas() {\n    console.log(navigator.platform)\n\n    // client, offset, scroll, css\n    this.state.initialMountWidth = this.mount.offsetWidth\n    this.state.initialMountHeight = this.mount.offsetHeight\n\n    let aspect = this.state.initialMountWidth / this.state.initialMountHeight\n\n    this.state.scene = new THREE.Scene()\n    this.state.camera = new Camera(\n      new THREE.Vector3(-1,1,1),\n      this.state.scene.position.clone(),\n      aspect\n    )\n    this.state.renderer = new THREE.WebGLRenderer({\n      alpha: true,\n      antialias: true\n    })\n    \n    this.state.renderer.setPixelRatio(window.devicePixelRatio)\n    this.state.renderer.setSize(this.state.initialMountWidth, this.state.initialMountHeight, true)\n    this.mount.appendChild(this.state.renderer.domElement)\n      \n    this.state.renderer.domElement.style.zIndex = 0\n  \n    let dirLight = new THREE.DirectionalLight()\n    this.state.scene.add(dirLight)\n    dirLight.position.set(-20,100,50)\n\n    this.state.audioManager = new AudioManager(window, this.props.baseRoute, this.state.audioiOS)\n\n    this.state.camera.add(this.state.audioManager.listener)\n    this.state.audioManager.loadSound('block-move', 4)\n  \n    // add floor\n    this.state.floor = new Floor(\n        0.9,\n        [0xacff78,0x292929],\n        [0,1]\n    )\n    await this.state.floor.loadTemplate(`${this.props.baseRoute}/levels/${this.props.level}.tsv`)\n    this.state.floor.addToScene(this.state.scene)\n\n    // add player\n    this.state.controller = new Controller(\n      document,\n      this.props.isActive,\n      `${this.props.baseRoute}/levels/solutions/${this.props.level}.txt`\n    );\n    // if(this.props.level === 'projects' || this.props.level === 'contact')\n    this.state.player = new RectangularPrismPlayer(this.state.floor.spawnTile.position.x, this.state.floor.spawnTile.position.z)\n    // this.state.player = new CubePlayer(this.state.floor.spawnTile.position.x, this.state.floor.spawnTile.position.z);\n    this.state.player.setController(this.state.controller)\n    this.state.scene.add(this.state.player)\n    this.state.camera.follow(this.state.player)\n\n    this.state.isInitialized = true\n    this.setState(this.state)\n  }\n\n  // main animation loop\n  async resumeThreeCanvas(logLocation=true) {\n    let frame = 0\n    let shouldRender = true\n  \n    const animate = () => {\n\n        if(this.props.isActive && shouldRender) {\n          this.state.renderer.render(this.state.scene, this.state.camera)\n  \n          // Move this before render to use block zoom in as background\n          if(this.state.player.completedLevel) {\n            shouldRender = false\n          }\n\n          // The controller says it has moved, but it has not been reflected in the state yet\n          // Used to remove text and icons explaining what to do\n          if(this.state.controller.hasMoved && !this.state.hasMoved) {\n            this.state.hasMoved = true\n            this.state.shouldResumeCanvas = false\n            this.setState(this.state)\n          }\n\n          if(this.state.player.playSound && !this.state.isMuted) {\n            this.state.audioManager.playSound('block-move')\n          }\n  \n          if (this.state.player.completionPending && !this.props.isComplete) {\n            this.props.completeStageCallback()\n          }\n\n          this.state.player.animate(this.state.floor)\n          this.state.camera.follow(this.state.player, .1);\n    \n          if(frame % 200 === 0 && logLocation) {\n              // let dir = this.state.player.getWorldDirection()\n              // dir.round()\n              // console.log(dir)\n              // console.log(this.state.player.position)\n              // console.log(this.state.player.rotation)\n              // let vector = new THREE.Vector3(0,0,1)\n              // vector.applyQuaternion(this.state.player.quaternion)\n              // console.log(vector)\n              console.log(this.state.player.getGridPosition())\n          }\n    \n          frame += 1\n          this.state.isRunning = true\n          requestAnimationFrame(animate)\n        }\n    }\n    animate()\n  }\n\n  resizeCanvasToMountSize() {\n    let canvas = this.state.renderer.domElement\n    let canvasWidth = canvas.offsetWidth\n    let canvasHeight = canvas.offsetHeight\n\n    let mountWidth = this.mount.offsetWidth\n    let mountHeight = this.mount.offsetHeight\n\n    if (canvasWidth !== mountWidth || canvasHeight !== mountHeight) {\n      this.state.renderer.setPixelRatio(window.devicePixelRatio)\n      this.state.renderer.setSize(mountWidth, mountHeight, true)\n      this.state.camera.aspect = mountWidth / mountHeight\n      this.state.camera.update()\n      updateCanvasCSS(this.mount) // Must update CSS manually since THREE.js\n                                  // doesn't do it\n    }\n  }\n  \n  render() {\n    return (\n      <>\n      {this.props.isActive && (\n        <audio\n          id='init'\n          ref={ref => (this.state.audioiOS.controller = ref)}\n          controls>\n          <source\n            ref={ref => (this.state.audioiOS.source = ref)}\n            src='http://mmills.io/portfolio/sounds/silence.wav'\n            type='audio/mpeg'></source>\n            Your browser does not support the audio tag.\n        </audio>\n      )}\n\n      {this.props.isActive && !this.props.isComplete && (\n        <IconButton  \n          id='intro'\n          size='large'\n          aria-label='delete'\n          onClick={() => {\n            if(this.state.audioiOS.isiOS && this.state.isMuted) {\n              alert('Warning: Real-time sound on iOS is experimental and may have bugs!')\n              this.state.audioiOS.controller.play()\n            }\n            this.state.isMuted = !this.state.isMuted\n            this.state.shouldResumeCanvas = false\n            this.setState(this.state)\n          }}\n          style={{\n            zIndex: 1000,\n            color: 'white',\n            top: '5rem',\n            left: '1rem',\n            transform: 'scale(1.5)'\n          }}>\n            {this.state.isMuted ? <VolumeOffIcon/> : <VolumeUpIcon/>}\n        </IconButton>\n      )}\n      <div\n        ref={ref => (this.mount = ref)}\n        id={this.props.level}\n        className='canvas-container'\n        style={{\n          display: (this.props.isActive) ? 'block' : 'none'\n        }}\n      >\n        {!this.state.hasMoved && <Hints/>}\n        <div style={{\n          display: (this.props.isActive && !this.props.isComplete) ? 'block' : 'none',\n          position: 'fixed',\n          margin: 'auto',\n          bottom: '2rem',\n          left: 0,\n          right: 0,\n          textAlign: 'center',\n          zIndex: '4'\n        }}>\n          <Button\n            variant='contained'\n            onClick={() => {\n              this.state.controller.autoSolve(.25)\n            }}\n            // style={{\n            //   display: (this.props.isActive && !this.props.isComplete) ? 'block' : 'none',\n            //   position: 'fixed',\n            //   margin: 'auto',\n            //   bottom: '2rem',\n            //   left: 0,\n            //   right: 0,\n            //   textAlign: 'center',\n            //   zIndex: '4'\n            // }}\n            >\n            Auto-solve\n          </Button>\n        </div>\n      </div>\n      </>\n    )\n  }\n}\n\nfunction updateCanvasCSS(mount) {\n  let canvas = mount.firstElementChild\n  canvas.style.width = mount.offsetWidth\n  canvas.style.height = mount.offsetHeight\n}\n\nfunction Hints() {\n  return (\n    isTouchDevice() ? (\n      <>\n      <h1 id='directions-text'>Swipe to move!</h1>\n      {/* <div id='touch-icon'></div> */}\n      </>\n    ) : (\n      <>\n      <h1 id='directions-text'>Use WASD or arrow keys to move!</h1>\n      </>\n    )\n  )\n}\n\nfunction isTouchDevice() {\n  return window.matchMedia('(any-hover: none)').matches\n}\n\nexport default Canvas\n","const Footer = () => {\n  return (\n    <div\n      id='footer'>\n        Copyright 2021\n    </div>\n  )\n}\n\nexport default Footer\n","import { useState, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport { Container, Button, Grid } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport ReplayIcon from '@material-ui/icons/Replay'\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext'\n\nimport Footer from './Footer'\n\nconst Page = ({ Component, isActive, replayStageCallback, nextLevel, baseRoute }) => {\n  const [isFadingIn, setFadingIn] = useState(true)\n  const history = useHistory()\n\n  const useStyles = makeStyles(() => ({\n    root: {\n      display: 'none',\n      top: '4rem',\n      position: 'relative',\n      backgroundColor: 'white',\n      padding: '2rem',\n      paddingBottom: '5rem',\n      transition: 'opacity .3s linear',\n      '-moz-transition': 'opacity .3s linear',\n      '-webkit-transition': 'opacity .3s linear',\n      zIndex: 1\n    },\n    fade: {\n      display: 'block',\n      opacity: 0\n    },\n    active: {\n      display: 'block',\n      opacity: 1\n    }\n  }))\n\n  useEffect(() => {\n    setTimeout(() => setFadingIn(false), 1000)\n  }, [])\n\n  const classes = useStyles()\n\n  return (\n      <>\n      {isActive &&\n        <Container\n          className={`${classes.root} ${isFadingIn ? classes.fade : ''} ${!isFadingIn && isActive ? classes.active: ''}`}\n          maxWidth='lg'\n          style={{\n            minHeight: '96vh'\n          }}\n          >\n          <Button\n            variant='contained'\n            startIcon={<ReplayIcon/>}\n            onClick={() => {replayStageCallback()}}>\n              Replay Level\n            </Button>\n          <br/><br/>\n          <Component baseRoute={baseRoute}/>\n          <Grid container justify='flex-end'>\n            <Button\n              variant='contained'\n              endIcon={<NavigateNextIcon/>}\n              onClick={() => {\n                history.push(nextLevel.route)}}\n              style={{\n                display: (nextLevel !== undefined) ? 'inline-flex' : 'none',\n                right: 0\n              }}>\n                Next Level\n            </Button>\n          </Grid>\n          <Footer />\n        </Container>}\n      </>\n  )\n}\n\nexport default Page\n","import { useLocation, useHistory } from 'react-router'\nimport { useEffect } from 'react'\n\nimport Canvas from './Canvas'\nimport Page from './Page'\n\nconst CanvasSwitcher = ({ pages, completeStageCallback, replayStageCallback, baseRoute, isiOS }) => {\n  const location = useLocation().pathname\n  const history = useHistory()\n\n  useEffect(() => {\n    if(location === '/')\n      history.push('/about')\n  })\n\n  useEffect(() => {    \n    pages.forEach(element => {\n      if (location === element.route) {\n        let html = document.getElementsByTagName('html')[0]\n        if (html) {\n          if (element.completed) {\n            html.style.touchAction = 'auto'\n          } else {\n            html.style.touchAction = 'none'\n          }\n        }\n      }\n    });\n  })\n\n  return (\n    <>\n    {pages.map((page, idx) => (\n        <>\n          {page.completed &&\n            <Page\n              Component={page.component}\n              isActive={location === page.route}\n              replayStageCallback={() => replayStageCallback(page.route)}\n              nextLevel={pages[idx+1]}\n              baseRoute={baseRoute}\n            />}\n          <Canvas\n            level={page.route.replace('/','')}\n            isActive={location === page.route}\n            completeStageCallback={() => completeStageCallback(page.route)}\n            isComplete={page.completed}\n            baseRoute={baseRoute}\n            isiOS={isiOS}\n            />\n        </>\n    ))}\n    </>\n  )\n}\n\nexport default CanvasSwitcher\n","import { useState, useEffect } from 'react'\nimport { useLocation } from 'react-router'\nimport { Typography, Button } from '@material-ui/core'\n\nconst messages = [\n  'Welcome to my interactive portfolio',\n  'website inspired by Bloxorz!',\n]\n\nconst Welcome = ({ dismissWelcomePage, baseRoute }) => {\n  const location = useLocation().pathname\n  const [curMessages, setMessages] = useState(Array(messages.length).fill(''))\n  \n  const [directionsVis, setDirectionsVis] = useState(false)\n  const [imgVis, setImgVis] = useState(false)\n  const [tapClickVis, setTapClickVis] = useState(false)\n\n  const updateText = () => {\n    let didUpdate = false\n    let newMessages = [...curMessages]\n\n    for(let i = 0; i < messages.length; i++) {\n      if(messages[i] === '<br>') {\n        if(curMessages[i] === '<br>')\n          continue\n        newMessages[i] = messages[i]\n        didUpdate = true\n        break\n      }\n      if(curMessages[i].length < messages[i].length) {\n        newMessages[i] = messages[i].substring(0, curMessages[i].length + 1)\n        didUpdate = true\n        break\n      }\n    }\n    \n    if(didUpdate) {\n      setTimeout(() => {\n        setMessages(newMessages)\n      }, 50)\n    }\n    else if(!directionsVis) {\n      setTimeout(() => {\n        setDirectionsVis(true)\n      }, 500)\n    }\n    else if(!imgVis) {\n      setTimeout(() => {\n        setImgVis(true)\n      }, 500)\n    }\n    else if(!tapClickVis) {\n      setTimeout(() => {\n        setTapClickVis(true)\n      }, 500)\n    }\n  }\n\n  useEffect(() => {\n    if(location !== '/')\n      dismissWelcomePage()\n    updateText()\n  })\n  \n  return (\n      <>\n      <Button\n          variant='contained'\n          onClick={() => {\n            dismissWelcomePage()\n          }}\n          style={{\n            display: 'block',\n            backgroundColor: 'rgba(0,0,0,0)',\n            position: 'absolute',\n            top: '4rem',\n            bottom: '0',\n            width: '100%',\n            textAlign: 'center',\n            zIndex: '1000'\n          }}>\n      </Button>\n      <div\n        id='welcome-page'\n        onclick={() => {dismissWelcomePage()}}\n      >\n        {curMessages.map((msg, idx) => <Message msg={msg} idx={idx}/>)}\n        <br/>\n        <br/>\n        <div style={{padding: '2rem'}}>\n          <Typography\n            className={directionsVis ? 'active' : 'fade'}\n            variant='h4'>\n            Beat the level to unlock the page or click the auto-solve button\n          </Typography>\n        </div>\n        <br/>\n        <img\n        alt='Logo'\n        className={imgVis ? 'active' : 'fade'}\n        src={baseRoute + '/images/welcome/how-to-play.png'}\n        style={{\n          width: '800px',\n          maxWidth: '80%',\n          height: 'auto'\n        }}/>\n\n        <br/>\n        <br/>\n        <div style={{padding: '2rem'}}>\n          <Typography\n            className={tapClickVis ? 'active' : 'fade'}\n            variant='h4'>\n            Tap or click to get started!\n          </Typography>\n        </div>\n        \n      </div>\n      </>\n  )\n}\n\nconst Message = ({ msg, idx }) => {\n  return (\n    msg === '<br>' ? <br/>\n    : (\n      <div>\n        <Typography\n          className={(msg.length === messages[idx].length) ? 'no-cursor' : ''}\n          variant='h3'\n          style={{\n            position: 'relative'\n          }}\n          >\n          {msg}\n        </Typography>\n      </div>\n  ))\n}\n\nexport default Welcome\n","import { useState, useRef, useEffect } from 'react'\n\nconst FadeInSection = (props) => {\n  const [isVisible, setVisible] = useState(true)\n  const domRef = useRef()\n  \n  // useEffect(() => {\n  //   const observer = new IntersectionObserver(entries => {\n  //     entries.forEach(entry => setVisible(entry.isIntersecting || isVisible))\n  //   })\n  //   observer.observe(domRef.current)\n  //   return () => observer.unobserve(domRef.current)\n  // }, [isVisible]);\n  \n  return (\n    <div\n      className={`fade-in-section ${isVisible ? 'is-visible' : ''}`}\n      ref={domRef}\n    >\n      {props.children}\n    </div>\n  );\n}\n\nexport default FadeInSection","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Timeline, TimelineItem, TimelineSeparator, TimelineConnector, TimelineContent,\n         TimelineOppositeContent, TimelineDot } from '@material-ui/lab'\nimport { Card, CardContent, CardMedia, Typography, useMediaQuery} from '@material-ui/core'\n\nimport LaptopMacIcon from '@material-ui/icons/LaptopMac'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: 0\n    // flexGrow: 0\n  },\n  card: {\n    // maxWidth: 345,\n  },\n  media: {\n    height: 140,\n  }\n}))\n\nconst CustomizedTimeline = () => {\n  const classes = useStyles()\n  const shouldAlternate = useMediaQuery('(min-width:600px)')\n\n  const content = [\n    {\n      year: '2016-2020',\n      icon: (<LaptopMacIcon />),\n      image: {\n        title: 'UF',\n        link: 'about/uf.png'\n      },\n      title: 'B.S. in Computer Science',\n      subtitle: 'University of Florida',\n      content: 'Began pursing a BS in CS at the University of Florida'\n    },\n    {\n      year: '2018-2020',\n      icon: (<LaptopMacIcon />),\n      image: {\n        title: 'Research',\n        link: 'about/fics.png'\n      },\n      title: 'Undergraduate Research Assistant',\n      subtitle: 'Florida Institute of Cybersecurity',\n      content: 'Became a machine learning research assistant at FICS under Vincent Bindschadler'\n    },\n    {\n      year: '2020-',\n      icon: (<LaptopMacIcon />),\n      image: {\n        title: 'Motorola',\n        link: 'about/motorola.jpg'\n      },\n      title: 'Jr. Software Engineer',\n      subtitle: 'Motorola Solutions',\n      content: 'Became a full time software engineer at Motorola Solutions'\n    },\n    {\n      year: '2021-',\n      icon: (<LaptopMacIcon />),\n      image: {\n        title: 'OMSCS',\n        link: 'about/omscs.png'\n      },\n      title: 'M.S. in Computer Science',\n      subtitle: 'Georgia Institute of Technology',\n      content: 'Currently pursuring a masters of science in computer science at Georgia Tech'\n    },\n    {\n      year: '????',\n      icon: (<LaptopMacIcon />),\n      title: 'Future',\n      content: 'Who knows what it will hold...'\n    },\n    \n  ]\n\n  return (\n    <Timeline style={{flexGrow: 0}} className={classes.root}\n      align={shouldAlternate ? 'alternate' : 'left'}>\n      {content.map((info, idx) => (\n        <TimelineItem key={idx}>\n          <TimelineOppositeContent style={{\n            flexGrow: shouldAlternate ? 1 : 0\n          }}>\n            {info.year ? \n              (<Typography color='textSecondary'>{info.year}</Typography>) : \n              (<Typography style={{'color': 'white'}}>0000</Typography>)}\n          </TimelineOppositeContent>\n          <TimelineSeparator>\n            <TimelineDot color='primary' variant='outlined'>\n              <LaptopMacIcon />\n            </TimelineDot>\n            <TimelineConnector />\n          </TimelineSeparator>\n          <TimelineContent>\n            <Card className={classes.card}>\n              {info.image && (\n                <CardMedia\n                className={classes.media}\n                image={'/portfolio/images/' + info.image.link}\n                title={info.image.title}\n                style={{\n                  backgroundSize: 'contain',\n                  margin: '.5rem'\n                }}\n                />\n              )}\n              <CardContent>\n                <Typography gutterBottom variant='h5'>\n                  {info.title}\n                </Typography>\n                <Typography gutterBottom variant='h6' style={{fontStyle:'italic'}}>\n                  {info.subtitle}\n                </Typography>\n                <Typography variant='body2' color='textSecondary' component='p'>\n                  {info.content}\n                </Typography>\n              </CardContent>\n            </Card>\n          </TimelineContent>\n        </TimelineItem>\n      ))}\n    </Timeline>\n  )\n}\n\nexport default CustomizedTimeline","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { Avatar, Typography, Card, CardContent, useMediaQuery } from '@material-ui/core'\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'flex',\n    padding: '.5rem'\n  }\n}))\n\nconst Overview = () => {\n  const classes = useStyles()\n  const shouldWrap = useMediaQuery('(min-width:900px)')\n\n  return (\n    <Card\n      className={classes.root}\n      style={{flexDirection: shouldWrap ? 'row' : 'column'}}>\n      <Avatar src={'/portfolio/images/headshot.jpg'}\n            style={{\n              objectFit: 'cover',\n              height: 'auto',\n              width: '400px',\n              maxWidth: '100%'\n            }}\n            alt=\"Me!\" />\n      <CardContent style={{\n        flexGrow: 1,\n        padding: '2rem'\n      }}>\n        <Typography variant='h4' gutterBottom>Overview</Typography>\n        <Typography variant='h6'>Occupation: Software Engineer</Typography>\n        <Typography variant='h6'>Company: Motorola Solutions</Typography>\n        <Typography variant='h6'>Location: Denver, CO</Typography>\n        <Typography variant='h6'>Total Experience: 5+ years</Typography>\n        <Typography variant='h6'>Industry Experience: 1+ year</Typography>\n      </CardContent>\n    </Card>\n  )\n}\n\nexport default Overview","import FadeInSection from '../FadeInSection'\n\nimport { Paper, Box, Typography } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport ComputerIcon from '@material-ui/icons/Computer'\nimport DirectionsRunIcon from '@material-ui/icons/DirectionsRun'\nimport CodeIcon from '@material-ui/icons/Code'\n\nimport CustomizedTimeline from '../CustomizedTimeline'\nimport Overview from '../Overview'\n\nconst useStyles = makeStyles(() => ({\n  paper: {\n    padding: '.5rem'\n  }\n}))\n\nconst About = () => {\n  const classes = useStyles()\n  \n  const cards = [\n    {\n      title: 'CS Interests',\n      icon: <ComputerIcon/>,\n      interests: [\n        'Backend development',\n        'Frontend development',\n        'Machine learning'\n      ]\n    },\n    {\n      title: 'Extracurricular Interests',\n      icon: <DirectionsRunIcon/>,\n      interests: [\n        'Investing / Economics',\n        'Disc Golf',\n        'Climbing',\n        'Hiking',\n        'Running',\n        'Weightlifting'\n      ]\n    },\n    {\n      title: 'Languages / Frameworks',\n      icon: <CodeIcon/>,\n      interests: [\n        'Python - Proficient',\n        'Javascript - Experienced',\n        'HTML / CSS - Experienced',\n        'React.JS - Experienced',\n        'Git - Experienced',\n        'SQL - Experienced',\n        'Node.js - Some knowledge'\n      ]\n    }\n  ]\n\n  return (\n    <>\n      <Typography variant='h3' gutterBottom>About Me</Typography>\n      <Overview />\n      <br/>\n      <FadeInSection>  \n        <Typography variant='h4' gutterBottom>Objective</Typography>\n        <Typography>\n          To make society more productive through the use of software solutions\n        </Typography>\n      </FadeInSection>\n      <br/>\n      {cards.map((card, i) => (\n        <>\n        <FadeInSection>  \n          <Paper className={classes.paper}>\n            {card.icon}\n            <Typography variant='h4' gutterBottom>{card.title}</Typography>\n            <ul>\n              {card.interests.map((interest, j) => (\n                <li key={`${i}-${j}`}><Typography>{interest}</Typography></li>\n                ))}\n            </ul>\n          </Paper>\n        </FadeInSection>\n        <br/>\n        </>\n      ))}\n      <FadeInSection>\n        <Typography variant='h4' gutterBottom>Timeline</Typography>\n          <Box style={{\n            left: 0\n          }}>\n            <CustomizedTimeline />\n          </Box>\n      </FadeInSection>\n      <br/><br/><br/><br/><br/>\n    </>\n  )\n}\n\nexport default About\n","import { Typography, Card, CardContent, CardMedia } from '@material-ui/core'\n\nconst Projects = () => {\n  return (\n    <>\n    <Typography variant='h3' gutterBottom>Projects</Typography>\n    <Card>\n      <CardMedia\n        style={{height: '400px'}}\n        image='/portfolio/images/projects/poli-bias.jpg'\n        title='Political Bias Detector'\n      />\n      <CardContent>\n        <Typography gutterBottom variant='h5' component='h2'>\n          Political Bias Detector\n        </Typography>\n        <Typography variant='body2' color='textSecondary' component='p' gutterBottom>\n          This project uses a state-of-the-art GPT-2 model, hosted on a dockerized\n          Python server on a Google cloud cluster to make predictions about political\n          bias in text.\n        </Typography>\n        <Typography variant='body2' color='textSecondary' component='p' gutterBottom>\n          This model underwent reinforcement training on 86,460 tweets from 200\n          different US senators, using their party affiliation as the label.\n        </Typography>\n        <Typography variant='body2' color='textSecondary' component='p' gutterBottom>\n          In order to query the model, we built a chrome extension that allows you to\n          highlight text and send an HTTP request to the server. The results come back\n          within a few seconds.\n        </Typography>\n        <Typography variant='body2' color='textSecondary' component='p'>\n          You can find the chrome extension listed on the Chrome Web Store&nbsp;\n            <a\n              href='https://chrome.google.com/webstore/detail/bias-detector/aifdepmjdlepmpcgdkmbnhjfdmpjboma'\n              style={{\n                color: 'purple',\n                fontSize: '1rem',\n                textDecoration: 'underline'\n              }}\n            >here</a>\n          </Typography>\n      </CardContent>\n    </Card>\n    {/* <br/>\n        <h2>Political Bias Detector</h2>\n        <img src={baseRoute + '/images/projects/poli-bias.jpg'}\n          style={{\n            height: '400px',\n            width: '640px',\n            maxWidth: '100%',\n            height: 'auto'}}\n          title='Political Bias Detector' />\n        <p>\n          This project uses a state-of-the-art GPT-2 model, hosted on a dockerized\n          Python server on a Google cloud cluster to make predictions about political\n          bias in text.\n        </p>\n        <p>\n          This model underwent reinforcement training on 86,460 tweets from 200\n          different US senators, using their party affiliation as the label.\n        </p>\n        <p>\n          In order to query the model, we built a chrome extension that allows you to\n          highlight text and send an HTTP request to the server. The results come back\n          within a few seconds.\n        </p>\n        <p>\n          You can find the chrome extension listed on the Chrome Web Store&nbsp;\n          <a\n            href='https://chrome.google.com/webstore/detail/bias-detector/aifdepmjdlepmpcgdkmbnhjfdmpjboma'\n            style={{\n              color: 'purple',\n              fontSize: '1rem',\n              textDecoration: 'underline'\n            }}\n          >here</a>\n        </p> */}\n        <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>\n      </>\n  )\n}\n\nexport default Projects\n","import { useState } from 'react'\nimport { Typography, Button, TextField } from '@material-ui/core'\n\nconst EMAIL_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzp6ZdgtfOM6Mz0BSM9KU8Gupa-pKaaJk0iGPCxzRDBb5nD4EZdb_9a8i_znB30nYIZ2w/exec'\n\nconst Contact = () => {\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    message: ''\n  })\n  const [error, setError] = useState({\n    name: false,\n    email: false\n  })\n  const [emailSent, setEmailSent] = useState(false)\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    \n    let httpRequest = EMAIL_SCRIPT_URL\n    httpRequest += '?name=' + encodeURI(form.name)\n    httpRequest += '&email=' + encodeURI(form.email)\n    httpRequest += '&message=' + encodeURI(form.message)\n    \n    if(form.name !== '' && form.email !== '') {\n      fetch(httpRequest, {\n        method: 'POST',\n        mode: 'no-cors',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n      setEmailSent(true)\n    } else {\n      setError({\n        name: form.name === '',\n        email: form.email === ''\n      })\n    }\n  }\n\n  const handleChange = (event) => {\n    const field = event.target.id\n    const value = event.target.value\n    \n    let newForm = { ...form }\n    newForm[field] = value\n    setForm(newForm)\n  }\n  \n  return (\n    <>\n      <Typography variant='h3' gutterBottom>Contact</Typography>\n        <form>\n            <TextField \n              id='name'\n              label='Full Name'\n              placeholder='Your name...'\n              value={form.name}\n              onChange={handleChange}\n              variant='outlined'\n              error={error.name && form.name === ''}\n              helperText={\n                error.name && form.name === '' && 'Name is required'\n              }\n              fullWidth\n              required\n            />\n            <br/><br/>\n            <TextField \n              id='email'\n              label='Email'\n              placeholder='Your email...'\n              value={form.email}\n              onChange={handleChange}\n              variant='outlined'\n              error={error.email && form.email === ''}\n              helperText={\n                error.email && form.email === '' && 'Email is required'\n              }\n              fullWidth\n              required\n            />\n            <br/><br/>\n            <TextField \n              id='message'\n              label='Message'\n              placeholder='Write something...'\n              value={form.message}\n              onChange={handleChange}\n              variant='outlined'\n              multiline\n              fullWidth\n              rows={2}\n              rowMax={4}\n            />\n            <br/><br/>\n\n            {!emailSent && (\n              <Button\n                variant='contained'\n                onClick={handleSubmit}\n                >\n                Submit\n              </Button>\n            )}\n            {emailSent && (\n              <>\n                <Typography variant='h6'>\n                  Email sent!\n                </Typography>\n                <Typography variant='body2'>\n                  Thanks for contacting me! I will get back to you as soon as possible!\n                </Typography>\n              </>\n            )}\n\n            <br/><br/>\n          </form>\n        \n        <Typography variant='body2' color='textSecondary' component='p'>\n          Please use the contact form above or send an email to: marcusm009@gmail.com\n        </Typography>\n        <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>\n        <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>\n      </>\n  )\n}\n\nexport default Contact\n","import { BrowserRouter, Redirect } from 'react-router-dom'\nimport { useState } from 'react'\n\nimport { CssBaseline } from '@material-ui/core'\n\nimport NavBar from './react-components/NavBar'\nimport TitleBar from './react-components/TitleBar'\nimport CanvasSwitcher from './react-components/CanvasSwitcher'\n\nimport Welcome from './react-components/pages/Welcome'\nimport About from './react-components/pages/About'\nimport Projects from './react-components/pages/Projects'\nimport Contact from './react-components/pages/Contact'\n\nconst BASE_ROUTE = '/portfolio'\nconst VERSION = '0.9.0'\n\nconsole.log('VER: ', VERSION)\n\nconst App = () => {  \n  const [state, setState] = useState({\n    pages: [\n      {\n        text: 'About',\n        route: '/about',\n        completed: false,\n        component: About\n      },\n      {\n        text: 'Projects',\n        route: '/projects',\n        completed: false,\n        component: Projects\n      },\n      {\n        text: 'Contact',\n        route: '/contact',\n        completed: false,\n        component: Contact\n      }\n    ],\n    welcomePageDismissed: false,\n    touchEnabled: false\n  })\n\n  const completeStage = route => {\n    console.log(route, ' completed!')\n    state.pages.forEach((page, idx) => {\n      if (page.route === route){\n        let newState = {}\n        Object.assign(newState, state)\n        newState.pages[idx].completed = true\n        setState(newState)\n      }\n    })\n  }\n\n  const replayStage = route => {\n    console.log(route, ' - replaying!')\n    state.pages.forEach((page, idx) => {\n      if (page.route === route){\n        let newState = {}\n        Object.assign(newState, state)\n        newState.pages[idx].completed = false\n        setState(newState)\n      }\n    })\n  }\n\n  const dismissWelcomePage = () => {\n    setState({welcomePageDismissed: true, pages: state.pages})\n  }\n\n  const showWelcomePage = () => {\n    setState({welcomePageDismissed: false, pages: state.pages})\n  }\n\n  return (\n    <BrowserRouter\n      basename={BASE_ROUTE}>\n      \n      <CssBaseline />\n      <TitleBar\n        baseRoute={BASE_ROUTE}\n        showWelcomePage={showWelcomePage}\n      />\n      <NavBar\n        buttons={state.pages}\n        baseRoute={BASE_ROUTE}\n      />\n      {\n        !state.welcomePageDismissed ? (\n          <Welcome\n            baseRoute={BASE_ROUTE}\n            dismissWelcomePage={dismissWelcomePage}\n            />\n        ) : (\n          <CanvasSwitcher\n            pages={state.pages}\n            completeStageCallback={completeStage}\n            replayStageCallback={replayStage}\n            baseRoute={BASE_ROUTE}\n            isiOS={isiOS()}\n          />\n        )\n      }\n      <div\n        id={'ver'}\n        style={{\n          color: 'white',\n          position: 'fixed',\n          right: '2px',\n          bottom: '2px',\n          zIndex: '999'\n        }}\n        >\n        Ver: {VERSION}</div>\n    </BrowserRouter>\n  )\n}\n\nfunction isiOS() {\n  let isiOS = false\n  if (/iP(hone|od|ad)/.test(navigator.platform)) {\n      isiOS = true\n  }\n  return isiOS\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './normalize.css'\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}